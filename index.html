<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Future</title>
    <meta name="viewport" content="initial-scale=1,width=device-width"/> 
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/header.css">
	<link rel=stylesheet href="css/container.css">
	<!--<link rel="stylesheet" href="css/icon.css">-->
	<link rel="stylesheet" href="css/btn.css">
</head>
<body>
    <header >
        <img src="img/if_facebook__social__media_icon_2986194.svg" alt="Amazing line art of a scone" class="img-responsive"/>
        <a href="Login/login.html" class="ListItem" target="_blank" id="login">ç™»å½•/æ³¨å†Œ</a>
        <a href="Edit/edit.html" class="ListItem" target="_blank">å‘å¸–</a>
    </header>


	<div class="container" id="blogsList">

		<div class="mypanel" v-for="blog in blogs">
			<header class="mypanel-title">
				<h3 >{{blog.title}} </h3>
			</header>
			<!--<div class="mypanel-author">
				<h3 class="mypanel-title">æŸ¥æ‹‰å›¾æ–¯</h3>
			</div>-->
			<main class="mypanel-body">
				{{blog.body}}
			</main>
			<footer>
				<button class="btn">ğŸ‘</button>
			</footer>
		</div>

	</div>
    <script src="https://cdn.bootcss.com/jquery/3.3.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script>
        /*
        * https://www.jianshu.com/p/073f79c5e438
        * æ­£åˆ™è¡¨è¾¾å¼è·å¾—urlä¸­çš„token
        * */
        function getQueryString(name) {
            var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
            var r = window.location.search.substr(1).match(reg);

            if (r != null) {
                return unescape(r[2]);
            }
            return null;
        }
        var token = getQueryString("token")
        if(token == undefined && localStorage.token == undefined){
            //è¯´æ˜ç”¨æˆ·æ˜¯ç›´æ¥è®¿é—®é¦–é¡µå¹¶ä¸”ä¹‹å‰æ²¡æœ‰ç™»é™†è¿‡
        }else if(token) {
            //å¦‚æœtokenæœ‰å€¼ï¼Œè¯´æ˜ç”¨æˆ·æ˜¯ç”¨GitHubç™»å½•åé‡å®šå‘åˆ°é¦–é¡µçš„
            //å°†tokenå­˜å‚¨åœ¨localStorageæ–¹ä¾¿å…¶ä»–é¡µé¢ä½¿ç”¨
            localStorage.token = token
        }
        //å¦‚æœç”¨æˆ·å¤„äºç™»å½•çŠ¶æ€ï¼Œåˆ™ä¿®æ”¹header
        if(localStorage.token){
            $.ajax({
                url: "https://api.github.com/user",
                type: 'get',
                data: {
                    access_token:"d96058014f26cb713b43ff8ee9ebf7d5bf4ebb2c",
                },
                success:  function (data) {
                    let login = document.getElementById("login")
                    login.innerHTML = data.name
                }
            });

        }

    </script>
    <script type="text/javascript" src="js/initBlogsList.js"></script>

</body>
</html>